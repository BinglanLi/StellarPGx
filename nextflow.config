manifest {
    author = 'David Twesigomwe'
    description = 'Pipeline calls CYP gene star alleles from WGS BAM/CRAM files. Model gene: CYP2D6'
    mainScript = 'main.nf'
    version = '1.0.0-dev'
}



params {
// User-defined parameters

   // reference genome
   ref_file = "/spaces/gerrit/dbs/gatk/bundle/hg38/Homo_sapiens_assembly38.fasta"


   // BAM/CRAM file(s) and respective indexes 
       // example1 (single sample): /dataE/GeT-RM/NA12878*{bam,bai}
       // example2 (multiple samples): /dataE/GeT-RM/*{bam,bai}
       // example3 (CRAM files): /dataE/GeT-RM/HG*{cram,crai}

   in_bam = "/home/david/CypGen-dev/data/hg38/NA18632.final*{cram,crai}" 


   // Output directoy (Default is $PWD/results)
   out_dir = "$PWD/results"


   // DO NOT modify these lines  
   build37db = "$PWD/database/b37"
   build38db = "$PWD/database/hg38"
   build37res = "$PWD/resources/cyp_b37"
   build38res = "$PWD/resources/cyp_hg38"
   build37call = "$PWD/scripts/b37/bin"
   build38call = "$PWD/scripts/hg38/bin"

}


process {

// Containers

    // Singularity
    container = "$PWD/containers/cypgen-dev.sif"

    // Docker
    // container = "twesigomwedavid/cypgen-dev:latest"

}


profiles {


  // Local machine (MacOS, Linux, cluster node etc)
  standard { executor = 'local'}

  // SLURM scheduler
  slurm { executor == 'slurm'
          queue = 'batch'
  } 

  docker {
    docker.enabled = true
    docker.runOptions = '-u \$(id -u):\$(id -g)'
  }
  
  singularity {
    singularity.enabled = true
    singularity.autoMounts = true
    singularity.cacheDir = "$PWD/containers"
  }

  test { includeConfig 'conf/test.config' }
}
