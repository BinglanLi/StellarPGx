
manifest {
    author = 'David Twesigomwe'
    description = 'Pipeline calls CYP gene star alleles from WGS BAM/CRAM files. Model gene: CYP2D6'
    mainScript = 'main.nf'
    version = '1.0.0-dev'
}



params {
// User-defined parameters

   // reference genome
   ref_file = "/path/to/reference/genome"  // .fai index should be in the same folder


   // BAM/CRAM file(s) and respective indexes 
       // example1 (single sample): /dataE/GeT-RM/NA12878*{bam,bai}
       // example2 (multiple samples): /dataE/GeT-RM/*{bam,bai}
       // example3 (CRAM files): /dataE/GeT-RM/HG*{cram,crai}

   in_bam = "/path/to/Sample*{bam,bai}" 


   // Output directoy (Default is $PWD/results)
   out_dir = "$PWD/results"


   // DO NOT modify these lines  
   build37db = "$PWD/database/b37"
   build38db = "$PWD/database/hg38"
   build37res = "$PWD/resources/cyp_b37"
   build37res_mod = "$PWD/resources/cyp_hg19"
   build38res = "$PWD/resources/cyp_hg38"
   build37call = "$PWD/scripts/b37/bin"
   build38call = "$PWD/scripts/hg38/bin"

}


singularity {
    enabled = true
    autoMounts = true
    cacheDir = "$PWD/containers"
    runOptions = " --cleanenv"
}

// Uncomment the lines below to enable Docker

// docker {
//    enabled = true
//    runOptions = '-u \$(id -u):\$(id -g)'
//}



process {

    // ALL PROCESSES
    cache = true
    stageInMode = 'symlink'
    stageOutMode = 'rsync'
   // scratch = "$HOME/tmp"  // clean this regularly

    // Containers

    // Singularity
    container = "$PWD/containers/cypgen-dev.sif"

    // Docker
    // container = "twesigomwedavid/cypgen-dev:latest"

}



profiles {


    // Local machine (MacOS, Linux, cluster node etc)
    standard { 
        process.executor = 'local'
    }

    // SLURM scheduler
    slurm { 
        process.executor = 'slurm'
        process.queue = 'batch'
    } 

    // Other scheduler
    // sheduler_name {
    //	process.executor = 'sheduler_name'
    //	process.queue = 'batch'
    //}

    test { includeConfig "$PWD/tests/config/test.config" }

}
