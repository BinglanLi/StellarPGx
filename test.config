
process {

// Containers                                                                                                                                                

    // Singularity                                                                                                                                           
    container = "$PWD/containers/cypgen-dev.sif"

    // Docker                                                                                                                                                
    // container = "twesigomwedavid/cypgen-dev:latest"                                                                                                       

}


params {
// User-defined parameters

   // reference genome
   ref_file = "$PWD/tests/reference/hg38/chr22_hg38.fasta"


   // BAM/CRAM file(s) and respective indexes 
   in_bam = "$PWD/tests/samples/hg38/SIM001*{bam,bai}" 


   // Output directoy (Default is $PWD/results)
   out_dir = "$PWD/results"


   // DO NOT modify these lines  
   build37db = "$PWD/database/b37"
   build38db = "$PWD/database/hg38"
   build37res = "$PWD/tests/resources/cyp_b37"
   build38res = "$PWD/tests/resources/cyp_hg38"
   build37call = "$PWD/scripts/b37/bin"
   build38call = "$PWD/scripts/hg38/bin"

}


profiles {


  // Local machine (MacOS, Linux, cluster node etc)
  standard { executor = 'local'}

  // SLURM scheduler
  slurm { executor == 'slurm'
          queue = 'batch'
  } 

  docker {
    docker.enabled = true
    docker.runOptions = '-u \$(id -u):\$(id -g)'
  }
  
  singularity {
    singularity.enabled = true
    singularity.autoMounts = true
    singularity.cacheDir = "$PWD/containers"
  }


}


manifest {
    author = 'David Twesigomwe'
    description = 'Pipeline calls CYP gene star alleles from WGS BAM/CRAM files. Model gene: CYP2D6'
    mainScript = 'main.nf'
    version = '1.0.0-dev'
}
