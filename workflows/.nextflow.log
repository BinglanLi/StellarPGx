May-10 01:28:00.101 [main] DEBUG nextflow.cli.Launcher - $> nextflow run asteri.nf -profile slurm
May-10 01:28:01.364 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 20.01.0
May-10 01:28:01.404 [main] INFO  nextflow.cli.CmdRun - Launching `asteri.nf` [serene_solvay] - revision: f7d76ad559
May-10 01:28:01.541 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /home/david/asterigraph/workflows/nextflow.config
May-10 01:28:01.543 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /home/david/asterigraph/workflows/nextflow.config
May-10 01:28:01.702 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `slurm`
May-10 01:28:04.211 [main] DEBUG nextflow.config.ConfigBuilder - Available config profiles: [standard, slurm]
May-10 01:28:04.542 [main] DEBUG nextflow.Session - Session uuid: 5eeacf55-cb20-4dbb-b624-060673da35c2
May-10 01:28:04.542 [main] DEBUG nextflow.Session - Run name: serene_solvay
May-10 01:28:04.546 [main] DEBUG nextflow.Session - Executor pool size: 2
May-10 01:28:04.589 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 20.01.0 build 5264
  Created: 12-02-2020 10:14 UTC (12:14 SAST)
  System: Linux 3.10.0-1062.4.1.el7.x86_64
  Runtime: Groovy 2.5.8 on OpenJDK 64-Bit Server VM 1.8.0_252-b09
  Encoding: UTF-8 (UTF-8)
  Process: 7315@n22.core.wits.ac.za [146.141.240.122]
  CPUs: 1 - Mem: 55.5 GB (29.1 GB) - Swap: 27.9 GB (21.9 GB)
May-10 01:28:04.872 [main] DEBUG nextflow.Session - Work-dir: /home/david/asterigraph/workflows/work [nfs]
May-10 01:28:05.032 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
May-10 01:28:05.035 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
May-10 01:28:05.775 [main] DEBUG nextflow.Session - Session start invoked
May-10 01:28:06.868 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
May-10 01:28:06.924 [main] DEBUG nextflow.Session - Workflow process names [dsl1]: call_variants, analyse_vcf, filter_bam
May-10 01:28:07.098 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: /home/david/GeT-RM/bam_links/; pattern: NA121*{bam,bai}; options: [type:file]
May-10 01:28:07.836 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
May-10 01:28:07.836 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
May-10 01:28:07.873 [main] DEBUG nextflow.executor.Executor - [warm up] executor > slurm
May-10 01:28:07.910 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'slurm' > capacity: 100; pollInterval: 5s; dumpInterval: 5m 
May-10 01:28:07.943 [main] DEBUG n.executor.AbstractGridExecutor - Creating executor 'slurm' > queue-stat-interval: 1m
May-10 01:28:08.116 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > filter_bam -- maxForks: 2; blocking: false
May-10 01:28:08.263 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
May-10 01:28:08.263 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
May-10 01:28:08.266 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > call_variants -- maxForks: 2; blocking: false
May-10 01:28:08.317 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: slurm
May-10 01:28:08.317 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'slurm'
May-10 01:28:08.319 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > analyse_vcf -- maxForks: 2; blocking: false
May-10 01:28:08.342 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
May-10 01:28:08.342 [main] DEBUG nextflow.Session - Session await
May-10 01:28:09.227 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process filter_bam (1) > jobId: 2793164; workDir: /home/david/asterigraph/workflows/work/15/8eb96a7e1921f0e94054792e01f0ee
May-10 01:28:09.247 [Task submitter] INFO  nextflow.Session - [15/8eb96a] Submitted process > filter_bam (1)
May-10 01:28:09.359 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process filter_bam (2) > jobId: 2793165; workDir: /home/david/asterigraph/workflows/work/76/bf602b1929cefff87aab49d7048ad8
May-10 01:28:09.359 [Task submitter] INFO  nextflow.Session - [76/bf602b] Submitted process > filter_bam (2)
May-10 01:28:13.035 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 2793164; id: 1; name: filter_bam (1); status: COMPLETED; exit: 0; error: -; workDir: /home/david/asterigraph/workflows/work/15/8eb96a7e1921f0e94054792e01f0ee started: 1589066892961; exited: 2020-05-09T23:28:10.017212Z; ]
May-10 01:28:13.167 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 2793165; id: 2; name: filter_bam (2); status: COMPLETED; exit: 0; error: -; workDir: /home/david/asterigraph/workflows/work/76/bf602b1929cefff87aab49d7048ad8 started: 1589066893092; exited: 2020-05-09T23:28:10.866216Z; ]
May-10 01:28:13.483 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process call_variants (1) > jobId: 2793166; workDir: /home/david/asterigraph/workflows/work/2d/ff8d61749206541f41065c2a4fc0dd
May-10 01:28:13.484 [Task submitter] INFO  nextflow.Session - [2d/ff8d61] Submitted process > call_variants (1)
May-10 01:28:13.624 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [SLURM] submitted process call_variants (2) > jobId: 2793167; workDir: /home/david/asterigraph/workflows/work/66/f5891fc1a1d2f93a53f386fcd96a25
May-10 01:28:13.624 [Task submitter] INFO  nextflow.Session - [66/f5891f] Submitted process > call_variants (2)
May-10 01:28:17.958 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 2793166; id: 3; name: call_variants (1); status: COMPLETED; exit: 1; error: -; workDir: /home/david/asterigraph/workflows/work/2d/ff8d61749206541f41065c2a4fc0dd started: 1589066897949; exited: 2020-05-09T23:28:16.599242Z; ]
May-10 01:28:18.079 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'call_variants (1)'

Caused by:
  Process `call_variants (1)` terminated with an error exit status (1)

Command executed:

  samtools index NA12145_filtered.bam 
  graphtyper genotype /spaces/gerrit/dbs/gatk/bundle/2.8/b37/human_g1k_v37_decoy.fasta --sam=NA12145_filtered.bam --region=22:42522300-42528400 --output=NA12145_var --prior_vcf=/home/david/asterigraph/resources/common_var_plus_core_var.vcf.gz -a --no_cleanup

Command exit status:
  1

Command output:
  (empty)

Command error:
  [2020-05-10 01:28:16.592127] <error> [graphtyper::rocksdb] Could not destroy database '/tmp/graphtyper_200510_012815_22_042522300/it2/graph_gti'. Message: IO error: While lock file: /tmp/graphtyper_200510_012815_22_042522300/it2/graph_gti/LOCK: Resource temporarily unavailable
  [2020-05-10 01:28:16.593483] <error> [graphtyper::rocksdb] While trying to open '/tmp/graphtyper_200510_012815_22_042522300/it2/graph_gti'. Message: IO error: While lock file: /tmp/graphtyper_200510_012815_22_042522300/it2/graph_gti/LOCK: Resource temporarily unavailable

Work dir:
  /home/david/asterigraph/workflows/work/2d/ff8d61749206541f41065c2a4fc0dd

Tip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line
May-10 01:28:18.092 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `call_variants (1)` terminated with an error exit status (1)
May-10 01:28:18.163 [Task monitor] DEBUG nextflow.Session - The following nodes are still active:
[process] analyse_vcf
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

May-10 01:28:18.207 [main] DEBUG nextflow.Session - Session await > all process finished
May-10 01:28:18.208 [main] DEBUG nextflow.Session - Session await > all barriers passed
May-10 01:28:18.249 [main] WARN  n.processor.TaskPollingMonitor - Killing pending tasks (1)
May-10 01:28:18.433 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=2; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=1; succeedDuration=148ms; failedDuration=8ms; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
May-10 01:28:18.814 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
May-10 01:28:19.125 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
